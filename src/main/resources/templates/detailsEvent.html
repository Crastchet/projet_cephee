<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Détails Evenement</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet" />
<link type="text/css" rel="stylesheet" href="css/materialize.min.css"
	media="screen,projection" />
<link type="text/css" rel="stylesheet" href="css/style.css"
	media="screen,projection" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"
	charset="UTF-8" />
</head>
<body background="img/spiration-light.png">

	<div th:replace="fragments/header :: header">&nbsp;</div>

	<goodvibes style="margin-left: 300px;font-size: 50px;">Détails Evenement</goodvibes>

	<div class="row">
		<div class="col s12 m8 offset-m2">
			<div th:class="${publi.authorised}? 'card light-blue lighten-3' : 'card grey darken-1'">
				<div class="card-content white-text">
					<h3 th:text="${publi.title}"></h3>
					<div id="ownPublication" th:style="${member.login} != ${publi.author.login} ? 'display:none'">
					<div class="fixed-action-btn horizontal"
						style="position: absolute;; right: 20px; top: 20px">
						<a class="btn-floating btn-large red"> <i
							class="large material-icons">mode_edit</i>
						</a>
						<ul>
							<li>
								<form action="#" th:action="@{/deletepublication}"
									th:object="${publi}" method="post">
									<button class="btn-floating red" id="boutonSuppression"
										type="submit" name="action"
										title="Supprimer cette publication">
										<i class="material-icons right">delete_forever</i>
									</button>
								</form>
							</li>

							<li>
								<form action="#" th:action="@{/updateevent}"
									th:object="${publi}" method="post">
									<button class="btn-floating green" id="boutonModifier"
										type="submit" name="action" title="Modifier cette publication">
										<i class="material-icons right">loop</i>
									</button>
								</form>
							</li>

							<li>
								<form action="#" th:action="@{/notpublish}" th:object="${publi}"
									method="post">
									<button class="btn-floating blue" id="boutonMasquer"
										type="submit" name="action" title="Masquer cette publication">
										<i class="material-icons right">lock_outline</i>
									</button>
								</form>
							</li>

							<li>
								<form action="#" th:action="@{/publish}" th:object="${publi}"
									method="post">
									<button class="btn-floating yellow" id="boutonApparition"
										type="submit" name="action"
										title="Faire apparaître cette publication">
										<i class="material-icons right">lock_open</i>
									</button>
								</form>
							</li>
						</ul>
						<!-- <form action="#" th:action="@{/participate}" th:object="${publi}"
							method="post">
							<button class="btn-floating yellow" id="boutonParticiper"
								type="submit" name="action"
								title="Participer à cet évènement">
								<i class="material-icons right">lock_open</i>
							</button>
						</form> -->
					</div>
					</div>

					<p>
						<span style="font-size: 20px;"
							th:text="'Auteur: ' + ${publi.author.login}"></span>
					</p>
					<p>
						<span style="font-size: 20px;"
							th:text="'créé le: ' + ${#dates.format(publi.dateCreation, 'dd-MM-yyyy')}"></span>
					</p>
									<i class="material-icons">school</i> <span th:text="'Catégories : '"></span>
				<ul>
					<th:block th:object="${publi}" th:each="it : ${publi.category}">
						<li th:text="${it.title}"></li>
					</th:block>
				</ul>
					<form action="#" th:if="${participeDeja} == false" th:action="@{/participate}" th:object="${publi}" method="post">
						<button class="btn waves-effect waves-light" id="boutonCreation" type="submit" name="action">
						Je participe <i class="material-icons right">send</i>
						</button>
					</form>
					<form action="#" th:if="${participeDeja} == true" th:action="@{/stopparticipate}" th:object="${publi}" method="post">
						<button class="btn waves-effect waves-light" id="boutonCreation" type="submit" name="action">
						Je ne participe plus <i class="material-icons right">send</i>
						</button>
					</form>
				</div>
				<div class="card white">

					<div class="card-content black-text">
						<i class="material-icons">access_time</i> <span
							th:text="'Date et Heure Début: ' + ${publi.startevent}"></span> <br></br>
						<i class="material-icons">location_on</i> <span
							th:text="'Lieu événement: ' + ${publi.location}"></span> <br></br>
						<br></br> <i class="material-icons">people</i> <span
							th:text="'Nombre de participants: ' + ${publi.nbparticipant}">
						</span>
						<h5>Description:</h5>
						<p th:text="${publi.content}"></p>
					</div>
			</div>
		</div>
		</div>
	</div>

	<div th:replace="fragments/footer :: footer">&nbsp;</div>
</body>
</html>
